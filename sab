-- JOIN SCRIPT â€“ NO DATASTORE + KICK HOST (Run in FRIEND's executor)
local Players = game:GetService("Players")
local GuiService = game:GetService("GuiService")
local SoundService = game:GetService("SoundService")
local player = Players.LocalPlayer

if player.UserId ~= 5868204126 then
    print("JOIN: Wrong UserId")
    return
end

-- === JOIN SOUND ===
local joinSound = Instance.new("Sound")
joinSound.SoundId = "rbxassetid://9114487369"
joinSound.Volume = 0.7
joinSound.Parent = SoundService

local function play()
    if joinSound.IsPlaying then joinSound:Stop() end
    joinSound.TimePosition = 0
    joinSound:Play()
end

-- === GET HOST ===
local host = Players:FindFirstChild("2551851736") or Players:GetPlayerByUserId(2551851736)
if not host then
    print("Host not found. Make sure they're in the server.")
    return
end

-- === FIND HIDDEN KICK BUTTON ===
local kickButton
for _, obj in pairs(host.Character:GetDescendants()) do
    if obj:IsA("ClickDetector") and obj.MaxActivationDistance == 0 then
        kickButton = obj
        break
    end
end

if not kickButton then
    print("Host's kick button not found. Did they run the script?")
    return
end

-- === GUI ===
local screen = player:WaitForChild("PlayerGui")
local gui = Instance.new("ScreenGui")
gui.Name = "JoinHostUI"
gui.ResetOnSpawn = false
gui.Parent = screen

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 340, 0, 160)
frame.Position = UDim2.new(0.5, -170, 0.5, -80)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 2
frame.Parent = gui

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "Take Host's Slot?"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextScaled = true
title.Parent = frame

local status = Instance.new("TextLabel")
status.Size = UDim2.new(1, -20, 0, 30)
status.Position = UDim2.new(0, 10, 0, 45)
status.BackgroundTransparency = 1
status.Text = "Ready"
status.TextColor3 = Color3.fromRGB(200, 255, 200)
status.Font = Enum.Font.Gotham
status.TextScaled = true
status.Parent = frame

local joinBtn = Instance.new("TextButton")
joinBtn.Size = UDim2.new(0, 140, 0, 50)
joinBtn.Position = UDim2.new(0.5, -150, 1, -65)
joinBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
joinBtn.Text = "TAKE SLOT"
joinBtn.TextColor3 = Color3.new(1, 1, 1)
joinBtn.Font = Enum.Font.GothamBold
joinBtn.Parent = frame

local retryBtn = Instance.new("TextButton")
retryBtn.Size = UDim2.new(0, 140, 0, 50)
retryBtn.Position = UDim2.new(0.5, 10, 1, -65)
retryBtn.BackgroundColor3 = Color3.fromRGB(255, 170, 0)
retryBtn.Text = "RETRY (1s)"
retryBtn.TextColor3 = Color3.new(0, 0, 0)
retryBtn.Font = Enum.Font.GothamBold
retryBtn.Visible = false
retryBtn.Parent = frame

-- === KICK + JOIN ===
local function takeSlot()
    play()
    status.Text = "Kicking host..."
    status.TextColor3 = Color3.fromRGB(255, 200, 100)

    -- Trigger host's kick
    fireclickdetector(kickButton)

    wait(1.5)

    local url = string.format("roblox://placeId=%d&gameInstanceId=%s", game.PlaceId, game.JobId)
    status.Text = "Joining..."
    local opened = pcall(function()
        GuiService:OpenBrowser(url)
    end)

    if opened then
        wait(2)
        if player.Parent then
            status.Text = "Full? Retrying..."
            status.TextColor3 = Color3.fromRGB(255, 100, 100)
            joinBtn.Visible = false
            retryBtn.Visible = true
        else
            gui:Destroy()
        end
    end
end

joinBtn.MouseButton1Click:Connect(function()
    joinBtn.Visible = false
    takeSlot()
end)

retryBtn.MouseButton1Click:Connect(function()
    play()
    retryBtn.Text = "RETRYING..."
    retryBtn.Active = false

    spawn(function()
        while wait(1) do
            if not player.Parent then
                gui:Destroy()
                break
            end
            fireclickdetector(kickButton)
            pcall(function()
                GuiService:OpenBrowser(string.format("roblox://placeId=%d&gameInstanceId=%s", game.PlaceId, game.JobId))
            end)
        end
    end)

    delay(30, function()
        retryBtn.Text = "GAVE UP"
        retryBtn.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
    end)
end)

print("Ready! Click TAKE SLOT to kick host and join.")
